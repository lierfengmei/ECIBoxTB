11月07日版本修改

1、该版本修改了新ECI测试过程中出现的BUG。主要包括：
   ・一键测试的时候，新ECI的TPS测试没有运行； 
   ・TPS测试，发送命令多次错误的原因；
   ・自动测试过程中，CAN1和CAN2的测试结果没有；
   ・自动测试过程中，M01和WST测试错误；

其他问题：一键测试和单步测试在写入的时候，还是有区别的啊！


----------------------------------------------------------------
11月03日版本修改

1102_night版本中出现了一个重要问题：
1、Debug版本没问题，但是release版本中无法连接CAN口，该1103版本旨在修改这个BUG.(修改了这个版本的问题，因为忘了添加kernal文件夹，从而dll不能工作引起的。)

该版本在发布上没有问题，并且老ECI的功能验证后也没有问题。但是新ECI还是有一些bug的，下一版修改。
----------------------------------------------------------------
11月02日版本修改
todo
1、完善修改新ECI的测试功能。
----------------------------------------------------------------
11月01日版本修改
1、修改新ECI的关键程序部分（包括TPS测试、写入ECI参数）
2、修改完善了老ECI的测试功能，包括html测试报告、设置超时机制等，老ECI多次测试均通过O(∩_∩)O~ 老ECI的功能测试暂时可以先放到一边了。
       
----------------------------------------------------------------
10月31日版本修改
1.在ECI测试中每个命令测试函数分解，多次测试以保证测试结果的可靠性。
2.修改了ECI的生成报告，未测试。
----------------------------------------------------------------

10月27日版本修改
进行了下列项的部分操作：
1、在程序中讲不必要的已经注释掉的代码删除；
2、没有使用的子函数也删除；
3、添加必要的注释。
4、理清结构。
--------------------------------------------------------------
10月24日版本修改

1、将原来的TPS自己测试改成邢跃飞给我结果，我直接去采结果就行。(ton)
2、对写入报警曲线参数和自动测试添加延时，但是偶尔还是有错误，所以觉得后期增加如果有错误则重复测试的机制。
---------------------------------------------------------------
8月16日

1、在导通性测试中区分了老ECI和新ECI；
2、修改了page6点击完成后卡的问题，一会试试；
3、调整了report美观和对齐问题
4、解决问题：ERASE还没有测试，但是结果却为FAIL而不是Unfinished


Question:

7、Page6关闭很慢，多点几次就卡死了



1、如何想办法删除正在发送命令？
2、TPS/CAN测试有时候结果有误；？是否是因为延时不够？
3、有时候，拨码开关，点击万恒之后，就Disable，卡死了？
4、调整报告和日志信息的命名问题

5、switch测试后没有自动测试下一项；
6、点击完成后要反应好久；

8、200米开路测试字要大一点啦
9、TPS/CAN测试结果有时有误！
10、拨码开关，点击完成后，有时候就卡死了。
11、写入ECI参数之后，没有进行验证。

todo:
0、拨码开关测试可以直接点击完成按钮？应该修改。
1、看看剩下的功能有什么问题；
2、调整所有的显示内容；
3、自动识别串口号
4、增加ERASE命令，然后再写入wpmcc电缆参数等信息，然后读出数据看数据是否正确
5、如何让日志永远滚动到正中间，而不是页面最下端啊。
8、有错误的测试后，日志会出问题
9、给软件打包、发布

----------------------------------------------------------------------------------
8月7日
1、将串口和CAN口的指示灯都加上；
2、删除掉了测试需要用的button5；
3、测试了一键测试和日志存储；
4、在前面的勾选测试通过和测试不通过中增加一个全选功能；


修完：
1、返回主页之后，指示灯又变灰了，这个地方需要加一个判断；等恢复回去，还没有亮，需要修改；
2、不用切换，直接对第2路CAN进行数据的获取，看看是否正确；
3、DisplayAllMapData函数
4、将短路/开路/正常测试的长度也给加上；
5、mapdata存数据，调整所有的存储数据，测试报告的问题；
6、修改了ini文件，将开短路参数和电缆参数写入ECI当中；
7、增加了16~20拨码开关；
8、CCCONM/TPS增加测试中请等待；
9、进度条；
10、switchTest测试不通过会激活两个按钮；
11、最终测试结果，有一个不通过就是不通过；
12、指示灯结果为通过/不通过，而不是CC/CO
13、CAN1测试 CAN2测试完成
14、报告&日志信息的存储地址和名字PASS or FAIL or Unfinished.
------------------------------------------------------------------------------------------
8月6日
1、调通导通性测试
------------------------------------------------------------------------------------------
8月3日 	
1、调通了导通性测试按钮
------------------------------------------------------------------------------------------
8月1日	调通了CAN口
8月2日	
1、将拨码开关自动变化的值都全删掉，拨码开关在ini文件中不体现，基本测试基于01-01，
   后期的拨码开关测试测试01-01 一直到 F-F，总共测试1至15，共15个拨码开关值。
2、把拨码开关测试由多个Dialog变成了1个Dialog.(*^__^*)
3、拨码开关按钮函数已经调通；
4、短路/开路/正常状态的按钮函数已经调通。


残留的问题：
1、因为wirteToPort是异步发送，所以为了每个命令都发送，添加了MessageBox，这个后续再解决。
2、把有关串口和CAN口内容都调完

------------------------------------------------------------------------------------------



版本20160714正在做如下的事情：
1、将与串口有关的函数都提取出来，形成一个子.cpp和.h文件。降低主函数的大小，高内聚低耦合~
2、将与CAN口有关的函数都提取出来，形成一个子.cpp和.h文件。降低主函数的大小，高内聚低耦合~


7月19日：
将CSerialPort m_ComPort[2];在MainDlg中和CommunicateWithCom中的区分开来，修改众多函数。


7月25日 
1、SendAndReceiveCommandTB调试完了
2、调试SendTelegramToTB，CheckReceivedTeleFromTB，SendAndReceiveTeleTB 调试成功！
3、调试串口自动测试功能，让自动测试跑起来
4、调试串口与测试工装通信功能
5、调试CAN口通信功能


版本20160606完成了以下功能：
1、闭环检查所有的非模态对话框，只要是new的都必须delete掉，并且指针都置为NULL；
包括修改OnCancel函数 OnOK函数 PostNcDestroy函数 以及子窗口和父窗口之间建立消息传递机制。
1.1)  IDD_ABOUTBOX 模态对话框调用，不需要修改；
1.2） IDD_CONDUCT_DIALOG 暂时不再使用，以后需要使用再行修改；
1.3） IDD_CONFIG_DIALOG 模态对话框调用，不需要修改；
1.4） IDD_DIALOG_INTERFACE 作为模态对话框调用，不需要修改；
1.5） IDD_ECIBOXTB_DIALOG 暂时不再使用，以后需要使用再行修改；
1.6） IDD_INFO1_PAGE  暂时不再使用，以后需要使用再行修改；
1.7)  IDD_INFO2_PAGE  修改完毕
1.8)  IDD_INFO3_PAGE  修改完毕
1.9)  IDD_INFO4_PAGE  修改完毕 
1.10) IDD_INFO5_PAGE  修改完毕
1.11) IDD_INFO6_PAGE  修改完毕
1.12) IDD_RECORD_DIALOG 暂时不再使用，以后需要使用再行修改；
1.13) IDD_SWITCH_DIALOG 修改完毕
1.14) IDD_TEST_DIALOG   修改完毕
<完>
 




//----------------------2016年6月12日，重新进行如下工作------------------------------

//1、重新编写OnCommunication函数

//2、重新编写如下函数	
/*	BOOL	CheckECIComIfReceive(CString str);//查看是否接收到了字符串str
	BOOL	CheckCom2IfReceive(CString str);//查看是否接收到了字符串str
	UINT	CheckECIComIfInclude(CString str);	//查看接收到的字符串是否包括str
	UINT	SkipReceiveString(int num);		//num条接受到的字符串被忽略
*/

//把flagCom1ReceiveStatus修改成flagECIComReceiveStatus
//把flagCom2ReceiveStatus修改成flagTBComReceiveStatus
//把str_port1 修改成 strECIport
//把str_port2 修改成 strTBport
//增加了ivec_TBport

                                                                                  

//todo：设置0x55AA作为结束符是否合适？中间有没有可能出现数据恰好是0x55aa的情况？






-------------------------------------------------------------------------------------------------
版本20160527已经完成以下功能：

1、退出时有确认页面。
2、对于信息页面，当cancel或者close后，应该将指针指向NULL，以便下次顺利打开。


----------todo-----------
2.todo:返修模块还有好多功能都没有呢；
3.todo:数据最好存储成pdf等不能修改的格式，因为txt和html格式都能够被修改
4.todo:各拨码开关测试时，无法按停止测试按钮，需要修改

todo:到底串口多少对应串口多少，一定要写清楚，这个需要一一检查；

记录一些需要修改的小问题：
1、info6Page大页显示不全；
-------------------------------------------------------------------------------------------------
版本20160516已经完成以下功能：

1、将日志LOG信息以单独对话框的形式改成窗口折叠模式；
2、界面美化；
3、设定flagCom1Open flagCom2Open，来显示串口1和串口2的连接状态；（以及CAN）
-----------------------------------------------------------------------------------------------

版本20160503已经完成以下功能：

1、加检测功能，不能够因为没有连硬件程序就死掉了，而是要报警并正常返回
2、增加返修模式内容，这是个大块，然后看看需要添加哪些功能
3、修改软件界面形式，现在的界面太丑了，房工有建议参考样式

------------------------------------------------------------------------------------------------
版本20160329完成了以下功能：

1、将所有的模态对话框都修改成非模态对话框；
2、增加停止测试的功能；
3、调整测试准备页面，1和2合并，拨码开关放到page3中；

-------------------------------------------------------------------------------------------------

版本20160322完成了以下功能

已完成部分：
1、删除测试产品类型；
2、只保留开始测试时间和结束测试时间；
3、CAN口配置删掉；
4、串口只留Com口，整体配置页面适当缩小；
5、配置页面序列号删除；
6、测试准备（三）页面中ECI单板删掉，说明改成待定，不确定选项删掉；
7、把初始测试的距离改成3个，长度分别为200m，1500m, 2500m;
8、准备页面（四）绝缘耐压值/绝缘电阻值删掉；
9、根据调检修改耐压测试和绝缘测试;
10、删除暂停按钮和停止按钮；
11、默认测试某个拨码开关，其他的19个拨码开关都用RES读取测试一遍即可，提示通过拨下一个开关，测19个，测n个，哪几个，信息都放在ini里面，拨码开关，软启动；
12、当导通性连好后，其他测试运行前，需要写入以下曲线数据：
Subject: 电桥测到的数据和写入参数
写开短路参数
WPMCC:0040-020;0050-030;0150-030;0170-030;0300-010
WPMCO:0080-210;0090-205;0100-200;0200-205;0220-210
写电缆参数
WDT00:9999;0001;0190;
WDT01:0001;0001;0040;
WDT02:0980;0001;0190;
WDT03:0030;0001;0040;
WDT04:0440;0001;0185;
WDT05:0050;0001;0040;
WDT06:0250;0001;0185;
WDT07:0075;0001;0040;
WDT08:0180;0001;0185;
WDT09:0102;0001;0040;
WDT10:0130;0001;0190;
WDT11:0130;0001;0040;
WDT12:0100;0001;0190;
WDT13:0170;0001;0037;
WDT14:0085;0001;0198;
WDT15:0230;0001;0032;
WDT16:0075;0001;0230;
WDT17:0285;0001;0025;
其中电缆参数是我从老的ECI里读出来的，你也可以用LDT命令读一下老的ECI核对一下。

-------------------------------------------------------------------------------------------------------------------
2016年02月19日开始调试串口
